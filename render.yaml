services:
  - type: web
    name: health-metric-app
    env: python
    buildCommand: |
      echo "âœ… Installing dependencies..."
      pip install -r requirements.txt

      echo "âœ… Collecting static files..."
      python manage.py collectstatic --noinput

    startCommand: |
      echo "âœ… Running migrations..." && \
      python manage.py migrate --noinput && \
      echo "ðŸš€ Starting Gunicorn..." && \
      gunicorn BMI_calculator.wsgi:application
    envVars:
      - key: DEBUG
        value: "False"
      - key: SECRET_KEY
        value: 4om%rc413!hz@6xjcsykpzu88%1p696q@)-kl3^5tgl8hosu24
      - key: DATABASE_URL
        value: postgresql://healthuser:R73zfkFXJ4TQ5y1Oe40l28O08iQwm9WY@dpg-d1qmb27fte5s73dh7820-a/healthmetric_db
      - key: ALLOWED_HOSTS
        value: health-metric-app.onrender.com
